(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{501:function(t,n,e){"use strict";e.r(n);var s=e(23),r=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[t._v("#")]),t._v(" HTTPS")]),t._v(" "),e("p",[t._v("因为安全性方面的考虑，给数据用上 HTTPS 还是很有必要的。")]),t._v(" "),e("p",[t._v("这里借助傻瓜式的 "),e("a",{attrs:{href:"https://certbot.eff.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("certbot"),e("OutboundLink")],1),t._v("来生产 SSL 证书，它是由 Let’s Encrypt 提供的服务。")]),t._v(" "),e("p",[t._v("这里写一下 cantos7 下的部署过程。")]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" certbot python2-certbot-nginx\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 先暂停nginx")]),t._v("\nnginx -s stop \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置（填写设置）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" certbot --nginx \n\n// 可选（若python请求报错）\npip "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --upgrade --force-reinstall "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'requests==2.6.0'")]),t._v(" urllib3  \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 手动更新")]),t._v("\ncertbot renew\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自动更新")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"0 0,12 * * * root python -c 'import random; import time; time.sleep(random.random() * 3600)' && certbot renew -q\"")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" -a /etc/crontab "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /dev/null\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看证书配置")]),t._v("\ncertbot certificates\n")])])]),e("p",[t._v("ps: 如果 http 请求能够获得， https 请求无法访问，可以看一下安全组配置。")]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("参考")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/036f83be926f",target:"_blank",rel:"noopener noreferrer"}},[t._v("centos7 certbot nginx"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://certbot.eff.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("certbot"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=r.exports}}]);